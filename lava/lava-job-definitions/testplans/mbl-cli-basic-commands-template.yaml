{% extends "shared/templates/base.yaml" %}

{% set job_name = "MBL CLI Basic Commands" %}
{% set lxc_creation = true %}
{% set lxc_name = "mbl-cli-lxc" %}

{% block testplan %}

- test:
    timeout:
      minutes: 50
    namespace: lxc
    definitions:

    {% set venv_name = "/tmp/mbl-cli-lxc" %}
    {% set venv_path = "/tmp/mbl-cli-lxc/bin" %}

    {{ macros.install_mbl_cli(venv_name, venv_path) | indent }}

    - path: ci/lava/tests/mbl_cli_basic_commands.yaml
      repository: https://github.com/ARMmbed/mbl-cli.git
      parameters:
          virtual_env_path: {{ venv_path }}
      name: run_mbl_cli_basic_commands
      from: git
      history: False
      branch: {{ mbl_branch }}
{% endblock testplan %}
